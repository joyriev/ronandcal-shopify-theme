{%- style -%}
  .section-{{ section.id }} {
    padding-top: {{ section.settings.mobile_padding_top }}px;
    padding-bottom: {{ section.settings.mobile_padding_bottom }}px;
    background-color: {{ section.settings.background_color }};
    background-image: url('{{ section.settings.bg_mobile_image | image_url }}');
    background-size: cover;
    background-position: center;

  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }} {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
      background_image: url('{{ section.settings.bg_image | image_url }}');
    }
  }
{%- endstyle -%}

{%- liquid
  assign fetch_priority = 'auto'
  if section.index == 1
    assign fetch_priority = 'high'
  endif
-%}

<div class="section-{{ section.id }}">
  <div class="page-width">
    <div
      style="column-gap: {{ section.settings.columns_gap }}px; row-gap: {{ section.settings.rows_gap }}px; align-items: {{ section.settings.content_alignment }};"
      class="[display:grid] grid-cols-1 md:grid-cols-2"
    >
      <div class="{% if section.settings.mobile_image_placement == 'under_heading' %} [display:none] md:block {% endif %}">
        <img
            class="w-full rounded-lg h-auto shadow {% if section.settings.rounded_image %} rounded-xl{% endif %}"
            src="{{ section.settings.image |  image_url }}"
            alt="{{ section.settings.alt }}"
            height="{{ section.settings.image.height }}"
            width="{{ section.settings.image.width }}"
            fetchpriority="{{  fetch_priority }}"
        >
      </div>
      <div style="gap: {{ section.settings.blocks_gap }}px;" class="{% if section.settings.image_placement == '1' %} md:-order-1 {% endif %} flex flex-col text-center md:text-left">
        {% for block in section.blocks %}
            {% case block.type %}
                {% when 'heading' %}
                    <style>
                        .block-{{ block.id }}-class {
                            font-size: {{ block.settings.mobile_font_size }}px;
                            font-weight: bold;
                            margin: 0;
                        }
                        @media screen and (min-width: 750px) {
                            .block-{{ block.id }}-class {
                                font-size: {{ block.settings.font_size }}px;
                            }
                        }
                    </style>
                    <{{ block.settings.heading_type }} class="block-{{ block.id }}-class" {{ block.shopify_attributes }}>{{ block.settings.content }}</{{ block.settings.heading_type }}>
                    {% if section.settings.mobile_image_placement == 'under_heading' %}
                        <div class="md:hidden">
                            <img
                            class="w-full rounded-lg h-auto shadow {% if section.settings.rounded_image %} rounded-xl{% endif %}"
                            src="{{ section.settings.image |  image_url }}"
                            alt="{{ section.settings.alt }}"
                            height="{{ section.settings.image.height }}"
                            width="{{ section.settings.image.width }}"
                            fetchpriority="{{  fetch_priority }}"
                        >
                        </div>
                    {% endif %}
                {% when 'text' %}
                    <div style="font-size: {{ block.settings.font_size }}px;" class="block-{{ block.id }}-class" {{ block.shopify_attributes }}>
                        <div class="{%  if block.settings.mobile_content != "" %}[display:none] md:block{% endif %} [&>p:first-child]:mt-0 [&>p:last-child]:mb-0 [&>ul]:text-left [&>ul]:pl-6">
                            {{ block.settings.content }}
                        </div>
                        {% if block.settings.mobile_content != "" %}
                            <div class="md:hidden [&>p:first-child]:mt-0 [&>p:last-child]:mb-0 [&>ul]:text-left [&>ul]:pl-6">
                                {{ block.settings.mobile_content }}
                            </div>
                        {% endif %}
                    </div>
            {% endcase %}
        {% endfor %}
      </div>
    </div>
    {% if section.settings.button_text != "" %}
      <div class="text-center">
        <a href="{{ section.settings.button_url }}" class="button">{{ section.settings.button_text }}</a>
      </div>
    {% endif %}
  </div>
</div>

{% schema %}
  {
    "name": "Image and Text",
    "settings": [
      {
        "type": "color",
        "id": "background_color",
        "label": "Background Color",
        "default": "#fcfbf9"
      },
      {
        "type": "image_picker",
        "id": "bg_image",
        "label": "Background Image"
      },
      {
        "type": "image_picker",
        "id": "bg_mobile_image",
        "label": "Background Mobile Image"
      },
      {
        "type": "header",
        "content": "Contents"
      },
      {
        "type": "image_picker",
        "id": "image",
        "label": "Section Image",
      },
      {
      "type": "checkbox",
        "id": "rounded_image",
        "label": "Rounded Image",
        "default": true
      },
      {
        "type": "header",
        "content": "Layout Settings"
      },
      {
        "type": "select",
        "options": [{ "value": "0", "label": "Image First"}, {"value": "1", "label": "Image Second"}],
        "id": "image_placement",
        "label": "Image Placement",
        "default": "0"
      },
      {
        "type": "select",
        "options": [{"value": "under_heading", "label": "Under Heading"}, {"value": "on_top", "label": "On Top"}],
        "label": "Mobile Image Placement",
        "id": "mobile_image_placement",
        "default": "under_heading"
      },
      {
        "type": "range",
        "id": "columns_gap",
        "label": "Columns Gap",
        "default": 40,
        "min": 0,
        "max": 200,
        "step": 4,
        "unit": "px"
      },
      {
        "type": "range",
        "id": "rows_gap",
        "label": "Rows Gap (Mobile)",
        "default": 20,
        "min": 0,
        "max": 200,
        "step": 4,
        "unit": "px"
      },
      {
        "type": "select",
        "label": "Content Vertical Alignment",
        "id": "content_alignment",
        "options": [
            {
                "value": "baseline",
                "label": "Baseline"
            },
            {
                "value": "center",
                "label": "Center"
            },
            {
                "value": "end",
                "label": "End"
            }
        ],
        "default": "center"
      },
      {
        "type": "range",
        "id": "blocks_gap",
        "label": "Blocks Gap",
        "default": 24,
        "min": 0,
        "max": 200,
        "step": 4,
        "unit": "px"
      },
      {
        "type": "text",
        "id": "button_text",
        "label": "Section Button Text"
      },
      {
        "type": "url",
        "id": "button_url",
        "label": "Section Button URL"
      },
      {
        "type": "header",
        "content": "Section Padding"
      }, {
        "type": "range",
        "id": "padding_top",
        "min": 0,
        "max": 400,
        "step": 4,
        "unit": "px",
        "label": "Padding Top",
        "default": 72
      }, {
        "type": "range",
        "id": "padding_bottom",
        "min": 0,
        "max": 400,
        "step": 4,
        "unit": "px",
        "label": "Padding Bottom",
        "default": 72
      }, {
        "type": "header",
        "content": "Mobile Padding"
      }, {
        "type": "range",
        "id": "mobile_padding_top",
        "min": 0,
        "max": 200,
        "step": 4,
        "unit": "px",
        "label": "Mobile Padding Top",
        "default": 40
      }, {
        "type": "range",
        "id": "mobile_padding_bottom",
        "min": 0,
        "max": 200,
        "step": 4,
        "unit": "px",
        "label": "Mobile Padding Bottom",
        "default": 40
      }
    ],
    "blocks": [
        {
            "type": "heading", 
            "name": "Heading", 
            "settings": [
                {
                    "type": "text",
                    "id": "content",
                    "label": "Content",
                    "default": "This the Heading"
                },
                {
                    "type": "select",
                    "id": "heading_type",
                    "options": [
                        {
                            "label": "H1",
                            "value": "h1"
                        },
                        {
                            "label": "H2",
                            "value": "h2"
                        },
                        {
                            "label": "H3",
                            "value": "h3"
                        },
                        {
                            "label": "H4",
                            "value": "h4"
                        },
                        {
                            "label": "H5",
                            "value": "h5"
                        },
                        {
                            "label": "H6",
                            "value": "h6"
                        }
                    ],
                    "label": "Heading type",
                    "default": "h2"
                },
                {
                    "type": "range",
                    "id": "font_size",
                    "label": "Font Size",
                    "default": 40,
                    "min": 8,
                    "max": 120,
                    "step": 2,
                    "unit": "px"
                },
                {
                    "type": "range",
                    "id": "mobile_font_size",
                    "label": "Mobile Font Size",
                    "default": 24,
                    "min": 8,
                    "max": 60,
                    "step": 2,
                    "unit": "px"
                }
            ]
        },
        {
            "type": "text",
            "name": "Text",
            "settings": [
                {
                    "type": "richtext",
                    "id": "content",
                    "label": "Content",
                    "default": "<p>Put your content here</p>"
                },
                {
                    "type": "richtext",
                    "id": "mobile_content",
                    "label": "Mobile Content"
                },
                {
                    "type": "range",
                    "id": "font_size",
                    "label": "Font Size",
                    "default": 18,
                    "min": 8,
                    "max": 60,
                    "step": 2,
                    "unit": "px"
                }
            ]
        }
    ],
    "presets": [
      {
        "name": "Image and Text"
      }
    ]
  }
{% endschema %}